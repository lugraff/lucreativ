<div class="flex flex-col h-full">
    <div class="flex justify-end gap-2 items-start h-14 from-transparent to-shadow bg-gradient-to-b overflow-hidden">
        <div class="text-subtle text-xs pl-12">Music from 'RGA-GT' (opengameart.org) under CC0</div>
        <div class="text-subtle text-end text-sm w-16">{{gamestatus.fps}} FPS</div>
        <div class="flex w-10 h-10">
            <button standard icon="featherAirplay" iconColor="textB" [iconStroke]="2"
                (click)="setToFullscreen()"></button>
        </div>
    </div>
    <div class="h-fit overflow-hidden select-none bg-shadow">
        <canvas id="canvas" class="fixed min-w-[160px] mx-auto w-[100%] rounded cursor-crosshair z-10" [width]="320"
            [height]="240"></canvas>
        <canvas id="canvasBG"
            class="min-w-[160px] mx-auto w-[100%] border-2 border-textB from-bgD to-bgA bg-gradient-to-b rounded pointer-events-none"
            [width]="320" [height]="240"></canvas>
    </div>
    <div class="flex gap-4 justify-between grow p-8 from-transparent to-shadow bg-gradient-to-t">
        <div class="flex h-fit w-full">
            <div class="self-center">
                <button game (pointerdown)="onActionLeft(true)" (pointerup)="onActionLeft(false)"
                    (pointerleave)="onActionLeft(false)" icon="featherChevronLeft" iconColor="textB" iconStroke="2"
                    iconSize="2.5rem"></button>
            </div>
            <div class="flex flex-col items-start justify-start gap-12">
                <button game (pointerdown)="onActionUp(true)" (pointerup)="onActionUp(false)"
                    (pointerleave)="onActionUp(false)" icon="featherChevronUp" iconColor="textB" iconStroke="2"
                    iconSize="2.5rem"></button>
                <button game (pointerdown)="onActionDown(true)" (pointerup)="onActionDown(false)"
                    (pointerleave)="onActionDown(false)" icon="featherChevronDown" iconColor="textB" iconStroke="2"
                    iconSize="2.5rem"></button>
            </div>
            <div class="self-center">
                <button game (pointerdown)="onActionRight(true)" (pointerup)="onActionRight(false)"
                    (pointerleave)="onActionRight(false)" icon="featherChevronRight" iconColor="textB" iconStroke="2"
                    iconSize="2.5rem"></button>
            </div>
            <div class="grow"></div>
            <div class="flex gap-4 py-4">
                <button game class="self-end" (pointerdown)="onActionA(true)" (pointerup)="onActionA(false)"
                    (pointerleave)="onActionA(false)">A</button>
                <button game class="self-start" (pointerdown)="onActionB(true)" (pointerup)="onActionB(false)"
                    (pointerleave)="onActionB(false)">B</button>
            </div>
        </div>
    </div>

</div>

<global-popup *ngIf="showExitPopup" [backCovered]="true" [closeable]="false" position="top" [offset]="128"
    icon="featherQuestionCircle" [minimizeable]="false" [resizeable]="false">
    <button standard (click)="onQuit()">Quit</button>
    <button standard autofocus (click)="onContinue()">Continue</button>
</global-popup>

<global-popup *ngIf="showMenuPopup" [backCovered]="false" [closeable]="false" position="center" popupWidth="85vw"
    myTitle="MenÃ¼" [minimizeable]="false" [resizeable]="false">
    <div class="flex items-center">
        <button standard icon="featherStar" iconColor="textB" (click)="onStartGame()">New Game</button>
    </div>
</global-popup>